{% extends 'base.html.twig' %}

{% block title %}Service Sacré Coeur{% endblock %}

{% block body %}

<style>
    {% if is_granted('ROLE_ADMIN') %}
        .userinfo {
            cursor: pointer;
        }
    {% endif %}
</style>

<div class="container">
    <div class="right-align">
        {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('admin') }}" class="btn grey">Administration</a>
        {% endif %}

        <a href="{{ path('soupe') }}" class="btn green">Je ramène de la soupe</a>
        <a href="{{ path('dessert') }}" class="btn pink">Je ramène un dessert</a>
        <a href="{{ path('app_logout') }}" class="btn red">Déconnexion</a>
    </div>
    <h1 class="center">Inscription à la soupe du Sacré Coeur</h1>

    {% if infoMessage is not empty %}
        <div class="row center {{ messageColor }}-text" style="margin: 20px; border: 2px solid {{ messageColor }}">
            <p class="flow-text">{{ infoMessage }}</p>
        </div>
    {% endif %}

    <div class="row">
        <div class="col m3 s12">
            <form id="datepicker_form">
                <div class="row">
                    <p class="flow-text">Choisir une date : </p>
                    <div class="input-field">
                        <input type="text" class="datepicker" id="datepicker" placeholder="Cliquez ici pour choisir une date">
                    </div>
                    <div class="input-field">
                        <input class="btn soupe" type="submit" value="Enregistrer">
                    </div>
                </div>
            </form>
        </div>

        <div class="col s12 m8 offset-m1 center">
            <p class="flow-text ">
                <a class="btn white left" href="{{ path('monday', {"monday" : lastMonday}) }}"><i class="material-icons grey-text">navigate_before</i></a>
                <b>{{ month }}</b> - Semaine N° {{ weekNumber }}
                <a class="btn white right" href="{{ path('monday', {"monday" : nextMonday}) }}"><i class="material-icons grey-text">navigate_next</i></a>
            </p>

            <table>
                <thead>
                <tr>
                    <th>Lundi {{ weekDays.monday }}</th>
                    <th>Mardi {{ weekDays.tuesday }}</th>
                    <th>Mercredi {{ weekDays.wednesday }}</th>
                    <th>Jeudi {{ weekDays.thursday }}</th>
                    <th>Vendredi {{ weekDays.friday }}</th>
                    <th>Samedi {{ weekDays.saturday }}</th>
                    <th>Dimanche {{ weekDays.sunday }}</th>
                </tr>
                </thead>

                <tbody>
                    {% autoescape %}
                        {{ tbody | raw}}
                    {% endautoescape %}
                </tbody>
            </table>
        </div>
        <div class="col s12 m8 offset-m4">
            <p class="flow-text red-text text-darken-2">Maximum {{ maxParticipantNumber }} bénévoles par jour.</p>
        </div>
        {% if isAdmin %}
            <div class="col s12 m8 offset-m4 center">
                <p class="flow-text red-text text-darken-1" style="margin-top: 0">Vous ne pouvez pas vous inscrire avec le compte administrateur. Pour cela merci de vous déconnecter et de vous reconnecter avec votre adresse email.</p>
            </div>
        {% endif %}

    </div>
    <div class="row">
        <div class="col m6 s12">
            <ul class="collapsible">
                <li>
                    <div class="collapsible-header"><i class="material-icons">info_outline</i>Informations / Horaires</div>
                    <div class="collapsible-body">
                        <p>Le rendez-vous est à 18h30 au 40 rue des Bouchers de Perthe. Merci de sonner en arrivant.</p>
                        <p>Le service se déroule de 19h à 20h.</p>
                    </div>
                </li>
            </ul>
        </div>
        <div class="col m6 s12">
            <ul class="collapsible">
                <li>
                    <div class="collapsible-header"><i class="material-icons">person_pin</i>Responsable du jour</div>
                    <div class="collapsible-body">
                        {{ responsables["now"|date("l")|lower].name }}
                        <br>
                        {{ responsables["now"|date("l")|lower].email }}
                        <br>
                        {{ responsables["now"|date("l")|lower].phone }}
                    </div>
                </li>
            </ul>
        </div>
        <div class="col s12">
            <ul class="collapsible">
                <li>
                    <div class="collapsible-header"><i class="material-icons">person_pin</i>Liste des responsables</div>
                    <div class="collapsible-body">
                        <table>
                            <thead>
                            <tr>
                                <th>Lundi</th>
                                <th>Mardi</th>
                                <th>Mercredi</th>
                                <th>Jeudi</th>
                                <th>Vendredi</th>
                                <th>Samedi</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr>
                                <td>
                                    {{ responsables.monday.name }}
                                    <br>
                                    {{ responsables.monday.email }}
                                    <br>
                                    {{ responsables.monday.phone }}
                                </td>
                                <td>
                                    {{ responsables.tuesday.name }}
                                    <br>
                                    {{ responsables.tuesday.email }}
                                    <br>
                                    {{ responsables.tuesday.phone }}
                                </td>
                                <td>
                                    {{ responsables.wednesday.name }}
                                    <br>
                                    {{ responsables.wednesday.email }}
                                    <br>
                                    {{ responsables.wednesday.phone }}
                                </td>
                                <td>
                                    {{ responsables.thursday.name }}
                                    <br>
                                    {{ responsables.thursday.email }}
                                    <br>
                                    {{ responsables.thursday.phone }}
                                </td>
                                <td>
                                    {{ responsables.friday.name }}
                                    <br>
                                    {{ responsables.friday.email }}
                                    <br>
                                    {{ responsables.friday.phone }}
                                </td>
                                <td>
                                    {{ responsables.saturday.name }}
                                    <br>
                                    {{ responsables.saturday.email }}
                                    <br>
                                    {{ responsables.saturday.phone }}
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </li>
            </ul>
        </div>
        <div class="col s12">
            <hr>
            <h4>Consignes pour la distribution de la Soupe chaude</h4>
            <ul class="red-text text-darken-2">
                <li><b>- noter sur le cahier le nom des personnes qui entrent</b></li>
            </ul>
            <p class="flow-text">
                <b>Préparation de 18h30 à 19h</b>
                <br>
                <ul>
                    <li>
                        <b>- en cuisine :</b>
                        en petite quantité au début puis en fonction de l'affluence
                        <ul style="padding-left: 4em">
                            <li>- faire chauffer la soupe et remplir quelques gobelets</li>
                            <li>- couper, tartiner et emballer 2 tartines par personne</li>
                            <li>- préparer le dessert (laver les fruits ou sortir les biscuits)</li>
                        </ul>
                    </li>
                    <li>
                        <b>- préparer la salle d'accueil :</b>
                        <ul style="padding-left: 4em">
                            <li>- placer les tables et les chaises en les espaçant</li>
                        </ul>
                    </li>
                    {#<br>#}
                    {#<br>#}
                    {#<li>#}
                        {#<b>- préparation de la banque de distribution :</b>#}
                        {#<ul style="padding-left: 4em">#}
                            {#<li>- mettre 3 tables en U devant le battant gauche de la porte de secours ouvert dans la salle à manger</li>#}
                            {#<li>y déposer les gobelets, les tartines et le dessert</li>#}
                        {#</ul>#}
                    {#</li>#}
                </ul>
            </p>
            <p class="flow-text">
                <b>Distribution de 19h à 19h30</b>
                {#<ul>#}
                    {#<li>- ne faire rentrer qu'une personne à la fois devant la table qui doit porter un masque</li>#}
                    {#<li>- demander à emporter le repas et ne pas consommer devant la porte</li>#}
                    {#<li>- ne faire rentrer personne dans la salle au delà des tables en U ni aux toilettes.</li>#}
                {#</ul>#}
            </p>
            <p class="flow-text">
                <b>Rangement de 19h30 à 20h</b>
                <ul>
                    <li>- fermer la porte de secours et vérifier qu'elle est bien fermée</li>
                    <li>- remettre les tables en place</li>
                    <li>- couper le gaz et les lumières</li>
                    <li>- fermer à clef la cuisine</li>
                </ul>
            </p>
        </div>
    </div>
    <div class="col s12 m8 offset-m4">
        <p>En cas de problème pour les inscriptions, veuillez contacter par mail le webmaster : <b>thibaut.de-gouberville@2018.icam.fr</b>. Pour tout autre question, merci de contacter l'un des responsables du jour.</p>
    </div>
    <div style="display: none" id="type">main</div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/datepicker2.js') }}?04102023"></script>
{% endblock %}
